<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>×¡×™×›×•× ×”×–×× ×ª ×¢×•×’×” ğŸ‚</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Assistant', sans-serif; 
            background-color: #fff1f2; 
            -webkit-tap-highlight-color: transparent;
        }
        .pink-card { box-shadow: 0 10px 15px -3px rgba(244, 114, 182, 0.2); }
        select, input, textarea { font-size: 16px !important; }
        .active-btn { background-color: #db2777 !important; color: white !important; border-color: #db2777 !important; }
    </style>
</head>
<body class="min-h-screen p-2 md:p-4 flex items-center justify-center">

    <div class="w-full max-w-md bg-white rounded-3xl overflow-hidden border border-pink-100 pink-card">
        <div class="bg-pink-500 p-5 text-white text-center">
            <h1 class="text-xl font-bold">×¡×™×›×•× ×•×¤×™×¨×•×˜ ×”×–×× ×” ğŸ‚</h1>
        </div>

        <div class="p-5 space-y-4">
            <!-- Customer Name -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1 italic text-pink-600">×©× ×”×œ×§×•×—/×” (×™×•×¤×™×¢ ×‘×™×•××Ÿ):</label>
                <input type="text" id="customerName" class="w-full p-3 border border-pink-100 rounded-xl bg-pink-50 outline-none focus:ring-2 focus:ring-pink-300" placeholder="×©× ×”×œ×§×•×—">
            </div>

            <!-- Cake Selection -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">×‘×—×¨×™ ×¢×•×’×”:</label>
                <select id="cakeType" onchange="updatePreview()" class="w-full p-3 border border-pink-100 rounded-xl bg-pink-50 outline-none focus:ring-2 focus:ring-pink-300">
                    <option value="">-- ×‘×—×¨×™ ××”×¨×©×™××” --</option>
                    <option value="×¢×•×’×ª ×‘× ×˜×• ×§×•×˜×¨ 10">×¢×•×’×ª ×‘× ×˜×• ×§×•×˜×¨ 10</option>
                    <option value="×¢×•×’×ª ×’×Ÿ ×‘× ×•× ×™×ª">×¢×•×’×ª ×’×Ÿ ×‘× ×•× ×™×ª</option>
                    <option value="×¢×•×’×ª ×’×Ÿ ×’×“×•×œ×” a3">×¢×•×’×ª ×’×Ÿ ×’×“×•×œ×” a3</option>
                    <option value="×¢×•×’×ª ×“×£ ×¡×•×›×¨ ×§×•×˜×¨ 22">×¢×•×’×ª ×“×£ ×¡×•×›×¨ ×§×•×˜×¨ 22</option>
                    <option value="×¢×•×’×ª ×“××•×™×•×ª ××“×£ ×¡×•×›×¨ ×§×•×˜×¨ 22">×¢×•×’×ª ×“××•×™×•×ª ××“×£ ×¡×•×›×¨ ×§×•×˜×¨ 22</option>
                    <option value="×¢×•×’×ª ×•×™× ×˜×’ ×§×•×˜×¨ 20">×¢×•×’×ª ×•×™× ×˜×’ ×§×•×˜×¨ 20</option>
                    <option value="×¢×•×’×” ××¢×•×¦×‘×ª ×‘× ×•× ×™×ª">×¢×•×’×” ××¢×•×¦×‘×ª ×‘× ×•× ×™×ª</option>
                    <option value="×¢×•×’×” ××¢×•×¦×‘×ª ×’×‘×•×”">×¢×•×’×” ××¢×•×¦×‘×ª ×’×‘×•×”</option>
                </select>
            </div>

            <!-- Dairy/Parve Toggle -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">×¡×•×’ ×¢×•×’×”:</label>
                <div class="flex gap-2">
                    <button onclick="setDietary('×—×œ×‘×™×ª')" id="d-×—×œ×‘×™×ª" class="diet-btn flex-1 py-3 rounded-xl border bg-pink-500 text-white font-bold transition-all active-btn">×—×œ×‘×™×ª</button>
                    <button onclick="setDietary('×¤×¨×•×•×”')" id="d-×¤×¨×•×•×”" class="diet-btn flex-1 py-3 rounded-xl border bg-white text-gray-500 border-gray-200 font-bold transition-all">×¤×¨×•×•×”</button>
                </div>
            </div>

            <!-- Additional Notes -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">×¤×¨×˜×™× × ×•×¡×¤×™× / ×›×™×ª×•×‘:</label>
                <textarea id="notes" oninput="updatePreview()" class="w-full p-3 border border-pink-100 rounded-xl bg-pink-50 h-24 outline-none resize-none focus:ring-2 focus:ring-pink-300" placeholder="××” ×œ×›×ª×•×‘ ×¢×œ ×”×¢×•×’×”?"></textarea>
            </div>

            <!-- Allergens -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">××œ×¨×’× ×™×:</label>
                <div class="flex gap-2 mb-2">
                    <button onclick="setAllergy('××™×Ÿ')" id="a-××™×Ÿ" class="aller-btn flex-1 py-2 rounded-xl border bg-pink-500 text-white font-bold transition-all active-btn">××™×Ÿ</button>
                    <button onclick="setAllergy('×™×©')" id="a-×™×©" class="aller-btn flex-1 py-2 rounded-xl border bg-white text-gray-500 border-gray-200 font-bold transition-all">×™×©</button>
                </div>
                <input type="text" id="allergyDetails" oninput="updatePreview()" class="hidden w-full p-3 border border-pink-100 rounded-xl bg-pink-50 outline-none shadow-inner" placeholder="×¤×¨×˜×™ ××ª ×”××œ×¨×’×™×”...">
            </div>

            <!-- Price and Date -->
            <div class="grid grid-cols-2 gap-3">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1 text-center">×ª××¨×™×š:</label>
                    <input type="date" id="orderDate" onchange="updatePreview()" class="w-full p-2 border border-pink-100 rounded-xl bg-pink-50 text-center">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1 text-center">××—×™×¨ (â‚ª):</label>
                    <input type="number" id="price" oninput="updatePreview()" class="w-full p-2 border border-pink-100 rounded-xl bg-pink-50 font-bold text-center" placeholder="0">
                </div>
            </div>

            <!-- Preview Display -->
            <div class="bg-gray-50 rounded-2xl p-4 border border-pink-100 mt-4">
                <p class="text-[10px] text-pink-400 font-bold mb-2">×ª×¦×•×’×” ××§×“×™××” ×œ×•×•×˜×¡××¤:</p>
                <div id="preview" class="text-[12px] text-gray-800 whitespace-pre-wrap leading-relaxed overflow-y-auto max-h-40 font-medium"></div>
            </div>

            <!-- Action Buttons -->
            <div class="space-y-2 pt-2">
                <button onclick="copyMsg()" id="copyBtn" class="w-full py-4 bg-pink-600 text-white rounded-2xl font-bold text-lg hover:bg-pink-700 transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2">
                    <span>ğŸ“±</span>
                    ×”×¢×ª×§×ª ×”×•×“×¢×” ×œ×•×•×˜×¡××¤
                </button>
                
                <button onclick="openGoogleCalendar()" class="w-full py-3 bg-blue-500 text-white rounded-2xl font-bold text-md hover:bg-blue-600 transition-all shadow-md active:scale-95 flex items-center justify-center gap-2">
                    <span>ğŸ“…</span>
                    ×”×•×¡×¤×” ×œ×™×•××Ÿ (08:00)
                </button>
            </div>
        </div>
    </div>

    <script>
        let dietary = '×—×œ×‘×™×ª';
        let allergy = '××™×Ÿ';

        const daysOfWeek = ["×¨××©×•×Ÿ", "×©× ×™", "×©×œ×™×©×™", "×¨×‘×™×¢×™", "×—××™×©×™", "×©×™×©×™", "×©×‘×ª"];

        function setDietary(val) {
            dietary = val;
            document.querySelectorAll('.diet-btn').forEach(b => {
                b.classList.remove('active-btn', 'bg-pink-500', 'text-white');
                b.classList.add('bg-white', 'text-gray-500');
            });
            document.getElementById('d-' + val).classList.add('active-btn');
            updatePreview();
        }

        function setAllergy(val) {
            allergy = val;
            const input = document.getElementById('allergyDetails');
            document.querySelectorAll('.aller-btn').forEach(b => {
                b.classList.remove('active-btn', 'bg-pink-500', 'text-white');
                b.classList.add('bg-white', 'text-gray-500');
            });
            document.getElementById('a-' + val).classList.add('active-btn');
            if(val === '×™×©') input.classList.remove('hidden'); else { input.classList.add('hidden'); input.value = ''; }
            updatePreview();
        }

        function updatePreview() {
            const cake = document.getElementById('cakeType').value || '---';
            const notes = document.getElementById('notes').value;
            const price = document.getElementById('price').value || '0';
            const dateVal = document.getElementById('orderDate').value;
            const allergyDetails = document.getElementById('allergyDetails').value;

            let msg = `*×¡×™×›×•× ×•×¤×™×¨×•×˜ ×”×–×× ×”* ğŸ‚\n\n`;
            msg += `${cake}\n`;
            msg += `×¢×•×’×” ${dietary}\n`;
            if(notes) msg += `×¤×¨×˜×™× × ×•×¡×¤×™×: ${notes}\n`;
            msg += `××œ×¨×’× ×™×: ${allergy === '×™×©' ? (allergyDetails || '×™×© ×œ×¦×™×™×Ÿ') : '××™×Ÿ'}\n`;
            
            if(dateVal) {
                const dateObj = new Date(dateVal);
                const dayName = daysOfWeek[dateObj.getDay()];
                const [y, m, d] = dateVal.split('-');
                msg += `×ª××¨×™×š: ×™×•× ${dayName}, ${d}/${m}/${y}\n`;
                msg += `××™×¡×•×£ ×‘×ª×™××•× ××¨××©\n`;
            }

            msg += `*×¡×”"×› ×œ×ª×©×œ×•×: â‚ª${price}*\n\n`;
            msg += `*×¤×™×¨×•×˜ ××œ×¨×’× ×™×:*\n`;
            msg += `×”×¢×•×’×” ××›×™×œ×” /×¢×œ×•×œ×” ×œ×”×›×™×œ ×›×œ ×©××¨×™×•×ª ×¢×§×‘×•×ª ××–×¢×¨×™×•×ª ×©×œ ×©×§×“×™×, ×‘×•×˜× ×™×, ××’×•×–×™×, ×—×œ×‘, ×œ×§×˜×•×– ×•×œ×›×Ÿ ×œ× ××ª××™××” ×œ×‘×¢×œ×™ ×¨×’×™×©×•×™×•×ª ××• ××œ×¨×’×™×•×ª.\n\n`;
            msg += `*× ×•×”×œ ×‘×™×˜×•×œ*\n`;
            msg += `*×¢×“ ×©×œ×•×©×” ×™××™× ×œ×¤× ×™ ×ª×•×—×–×¨ ×”××§×“××” ×œ××—×¨ ××›×Ÿ - ×œ×.*\n\n`;
            msg += `×™×© ×œ×‘×¦×¢ ×”×¢×‘×¨×ª ××§×“××” ×‘×¡×š 100 â‚ª ×¤×™×™×‘×•×§×¡ / ×‘×™×˜ ×‘×›×“×™ ×œ×¡×’×•×¨ ××ª ×”×”×–×× ×”ğŸ™\n\n`;
            msg += `*×œ××™×©×•×¨ ×•×¡×’×™×¨×ª ×”×–×× ×”*\n`;
            msg += `*× × ×œ×©×œ×•×— ×§×¨××ª×™ ×•×××©×¨/×ª.*\n\n`;
            msg += `×©×™×”×™×” ×‘××–×œ ×˜×•×‘ ×•×¨×§ ×‘×©××—×•×ª ğŸ‰ğŸ‰`;

            document.getElementById('preview').innerText = msg;
        }

        function openGoogleCalendar() {
            const name = document.getElementById('customerName').value || '×œ×§×•×—';
            const cake = document.getElementById('cakeType').value || '×”×–×× ×”';
            const dateVal = document.getElementById('orderDate').value;
            const notes = document.getElementById('notes').value || '';
            const price = document.getElementById('price').value || '0';
            const allergyInfo = allergy === '×™×©' ? document.getElementById('allergyDetails').value : '××™×Ÿ';
            
            if (!dateVal) {
                alert("×× × ×‘×—×¨×™ ×ª××¨×™×š ×œ×”×–×× ×” ğŸ“…");
                return;
            }

            const dateClean = dateVal.replace(/-/g, '');
            const startTime = dateClean + "T080000";
            const endTime = dateClean + "T083000";
            
            // Header for Google Calendar (No emoji as requested previously)
            const title = encodeURIComponent(`${name}: ${cake}`);
            
            const dateObj = new Date(dateVal);
            const dayName = daysOfWeek[dateObj.getDay()];
            const details = encodeURIComponent(`×™×•×: ${dayName}\nğŸ’° ××—×™×¨: ${price}â‚ª\nâš ï¸ ××œ×¨×’× ×™×: ${allergyInfo}\nğŸ“ ×”×¢×¨×•×ª: ${notes}\nğŸ¥› ×¡×•×’: ${dietary}`);
            
            const calendarUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${startTime}/${endTime}&details=${details}&sf=true&output=xml&colorId=4`;
            
            window.open(calendarUrl, '_blank');
        }

        function copyMsg() {
            const text = document.getElementById('preview').innerText;
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            
            const btn = document.getElementById('copyBtn');
            const originalContent = btn.innerHTML;
            btn.innerText = '×”×•×¢×ª×§! âœ…';
            btn.classList.replace('bg-pink-600', 'bg-green-600');
            setTimeout(() => {
                btn.innerHTML = originalContent;
                btn.classList.replace('bg-green-600', 'bg-pink-600');
            }, 2000);
        }
        
        window.onload = updatePreview;
    </script>
</body>
</html>